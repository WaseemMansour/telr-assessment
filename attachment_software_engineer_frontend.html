<!-- Invisible mode -->
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<noscript>
		<meta http-equiv="refresh" content="0; URL=/errors/noscript.html"/>
	</noscript>
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="minimum-scale=1">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<title>Payment Methods</title>
	<link rel="shortcut icon" href="https://uat-secure.telrdev.com/images/telr/favicon.png" type="image/x-icon">
	<link rel="icon" href="https://uat-secure.telrdev.com/images/telr/favicon.png" type="image/x-icon">
	<link href="https://uat.telrcdn.com/frameworks/bootstrap/css/bootstrap.min.css" rel="stylesheet">
	<link href="https://uat.telrcdn.com/frameworks/bootstrap/css/bootstrap-datetimepicker.min.css" rel="stylesheet">
	<link href="https://uat.telrcdn.com/css/pp2_common_new_ui.css" rel="stylesheet">
	<link href="https://uat-secure.telrdev.com/css/telr/pp2_new_ui.css" rel="stylesheet">
	<link href="assets/css/input-style.css" rel="stylesheet">
	<link href="assets/css/style.css" rel="stylesheet">

	<!--[if lt IE 9]>
	<script src="https://uat.telrcdn.com/frameworks/html5shiv/html5shiv.min.js"></script>
	<script src="https://uat.telrcdn.com/frameworks/respond/respond.min.js"></script>
	<![endif]-->
	<script>
		fc_allow_ac = 1;
	</script>
	<!-- TODO Uncomment this before sending assessment
		<script src="https://js.sentry-cdn.com/ce88de49c91a4f1069f6453b6d4317a0.min.js" crossorigin="anonymous"></script> -->
	<script>
		Sentry?.init({
			environment: "UAT"
		});
	</script>
	<script src="https://uat.telrcdn.com/frameworks/jquery.min.js"></script>
	<script src="https://uat.telrcdn.com/frameworks/bootstrap/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="https://uat.telrcdn.com/js/frame_common_new_ui.js"></script>
	<script src="https://uat.telrcdn.com/frameworks/bootstrap/js/bootstrap-hijri-datetimepicker.min.js"></script>
	<script type="text/javascript" src="https://uat.telrcdn.com/js/pp2_new_ui.js?v=30"></script>
	<script src="https://uat.telrcdn.com/js/aes.js"></script>
	<script src="https://uat.telrcdn.com/js/hmac-sha256.js"></script>
	<script type="text/javascript" src="https://uat.telrcdn.com/js/autosub.js"></script>

	<script
		type="text/javascript" charset="utf-8" async="" crossorigin="anonymous"
		src="https://songbird.cardinalcommerce.com/edge/v1/597f4104d311c33d4189/12.597f4104d311c33d4189.songbird.js">
	</script>
	<script
		type="text/javascript" charset="utf-8" async="" crossorigin="anonymous"
		src="https://songbird.cardinalcommerce.com/edge/v1/597f4104d311c33d4189/11.597f4104d311c33d4189.songbird.js">
	</script>
	<script
		type="text/javascript" charset="utf-8" async="" crossorigin="anonymous"
		src="https://songbird.cardinalcommerce.com/edge/v1/597f4104d311c33d4189/3.597f4104d311c33d4189.songbird.js">
	</script>

	<style type="text/css">
		.Cardinal-paymentButton {
			cursor: pointer;
			margin: 3px
		}

		.discoverWallet {
			width: 50em;
			max-height: 31.25em
		}

		@media screen and (max-width: 375px) {
			.discoverWallet {
				width: 23.875em
			}
		}

		.cardinal-stealth {
			position: absolute !important;
			display: block !important;
			top: -1000px !important;
			left: -1000px !important;
			z-index: -1000 !important;
			width: 1px !important;
			height: 1px !important
		}

		#Cardinal-discoverWallet-IFrame {
			width: 100%;
			height: 100%
		}

		.cardinalOverlay-open.seamless {
			padding: 0;
			border-radius: 0
		}
	</style>
	<style type="text/css">
		.cardinalOverlay-mask {
			position: fixed;
			z-index: 999998;
			top: 0;
			left: 0;
			opacity: 0;
			display: none;
			width: 100%;
			height: 100%;
			transition: opacity 1ms ease;
			background: rgba(0, 0, 0, .6)
		}

		.cardinalOverlay-content {
			position: fixed;
			z-index: 999999;
			top: 50%;
			left: 50%;
			opacity: 0;
			padding: 24px 20px;
			transform: translate(-50%, -50%);
			border-radius: 2px;
			background: #fff
		}

		@media screen and (max-width: 425px) {
			.cardinalOverlay-content {
				max-width: 410px;
				padding: .5em
			}
		}

		@media screen and (max-width: 375px) {
			.cardinalOverlay-content {
				max-width: 365px;
				padding: .5em
			}
		}

		@media screen and (max-height: 375px) and (orientation: landscape) {
			.cardinalOverlay-content {
				max-height: 365px;
				padding-top: .5em;
				padding-bottom: .5em
			}
		}

		@media screen and (max-width: 320px) {
			.cardinalOverlay-content {
				max-width: 310px;
				padding: .5em
			}
		}

		@media screen and (max-height: 320px) and (orientation: landscape) {
			.cardinalOverlay-content {
				max-height: 310px;
				padding-top: .5em;
				padding-bottom: .5em
			}
		}

		.legacy {
			-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";
			filter: alpha(opacity=50);
			background-color: #000
		}

		.cardinalOverlay-closeButton {
			font-family: Helvetica, Arial, sans-serif;
			font-size: 25px;
			line-height: 12px;
			position: absolute;
			top: 2px;
			right: -3px;
			cursor: pointer;
			color: #999;
			border: 0;
			outline: none;
			background: none
		}

		.cardinalOverlay-closeButton:hover {
			color: #000
		}

		.cardinalOverlay-content.cardinalOverlay-open, .cardinalOverlay-mask.cardinalOverlay-open {
			display: block;
			opacity: 1;
			transition: opacity .5s ease
		}

		.shadow-effect {
			-ms-box-shadow: 0 6px 22px -3px #000;
			-o-box-shadow: 0 6px 22px -3px #000;
			box-shadow: 0 6px 22px -3px #000
		}

		#Cardinal-MerchantContent {
			width: 100%;
			float: left
		}

		#Cardinal-ModalContent {
			height: 100%;
			width: 100%
		}

		@media screen and (max-width: 425px) {
			#Cardinal-ModalContent {
				-webkit-overflow-scrolling: touch;
				overflow-y: scroll;
				max-width: 390px
			}
		}

		@media screen and (max-height: 425px) and (orientation: landscape) {
			#Cardinal-ModalContent {
				-webkit-overflow-scrolling: touch;
				overflow-y: scroll;
				max-height: 360px
			}
		}

		@media screen and (max-width: 375px) {
			#Cardinal-ModalContent {
				-webkit-overflow-scrolling: touch;
				overflow-y: scroll;
				max-width: 350px
			}
		}

		@media screen and (max-height: 375px) and (orientation: landscape) {
			#Cardinal-ModalContent {
				-webkit-overflow-scrolling: touch;
				overflow-y: scroll;
				max-height: 350px
			}
		}

		@media screen and (max-width: 320px) {
			#Cardinal-ModalContent {
				-webkit-overflow-scrolling: touch;
				overflow-y: scroll;
				max-width: 300px
			}
		}

		@media screen and (max-height: 320px) and (orientation: landscape) {
			#Cardinal-ModalContent {
				-webkit-overflow-scrolling: touch;
				overflow-y: scroll;
				max-height: 295px
			}
		}

		@media screen and (min-width: 768px) and (max-width: 1024px) {
			#Cardinal-ModalContent {
				-webkit-overflow-scrolling: touch;
				overflow-y: scroll
			}
		}

		#Cardinal-ModalContent.size-01, #Cardinal-ModalContent.size-02 {
			height: 400px
		}

		#Cardinal-ModalContent.size-03 {
			height: 600px
		}

		#Cardinal-ModalContent.size-04 {
			height: 400px
		}

		#Cardinal-CCA-IFrame {
			display: block;
			margin: 0 auto
		}

		@media screen and (max-width: 425px) {
			#Cardinal-CCA-IFrame {
				max-width: 390px
			}
		}

		@media screen and (max-height: 425px) and (orientation: landscape) {
			#Cardinal-CCA-IFrame {
				max-height: 360px
			}
		}

		@media screen and (max-width: 375px) {
			#Cardinal-CCA-IFrame {
				max-width: 350px
			}
		}

		@media screen and (max-height: 375px) and (orientation: landscape) {
			#Cardinal-CCA-IFrame {
				max-height: 350px
			}
		}

		@media screen and (max-width: 320px) {
			#Cardinal-CCA-IFrame {
				max-width: 300px
			}
		}

		@media screen and (max-height: 320px) and (orientation: landscape) {
			#Cardinal-CCA-IFrame {
				max-height: 295px
			}
		}

		.cardinal-hide {
			display: none
		}

		.cardinal-img-responsive {
			max-width: 100%;
			height: auto;
			display: block
		}

		.cardinal-center-block {
			display: block;
			margin: 0 auto
		}

		.cardinal-text-center {
			text-align: center
		}
	</style>

	<style>
		* {
			margin: 0;
			padding: 0;
		}

		html,
		body {
			width: 100%;
			height: 100%;
			font-family: Verdana, Geneva, Tahoma, sans-serif;
		}

		.content {
			padding: 20px;

		}

		.button {
			height: 42px;
			background: #016F52;
			border-radius: 3px;
			text-transform: uppercase;
			font-size: 14px;
			transition: background 0.1s;
			cursor: pointer;
			padding: 0;
			border: 0;
			outline: 0;
			width: 100px;
			color: white;
			margin-bottom: 20px;
		}

		.control {
			background: white;
			border: 1px solid #505050;
			text-transform: initial;
		}

		.control {
			margin-top: 100px;
		}

		.control + .control {
			margin-top: 20px;
		}

		.button.primary:hover {
			background: rgba(62, 237, 191, 0.8);
		}

		.button.primary:active {
			background: #63debe;
		}

		.button.primary.button__disabled {
			background: #bdbdbd;
			color: #868686;
			cursor: default;
		}

		.vertical-center {
		}
	</style>
</head>
<body id="body" class="lang_en">
	<div id="media-size-detection-element"></div>
	<div class="modal fade" id="pleaseWaitDialog" data-backdrop="static" data-keyboard="false">
		<div class="modal-dialog modal-dialog-newui">
			<div class="modal-content modal-content-newui">
				<div class="modal-header modal-header-newui">
					<h4 class="modal-title modal-title-newui">Please wait, your transaction is processing.</h4>
				</div>
				<div class="modal-body modal-body-newui">
					<p>Do not press 'Reload' or 'Back' as that may interfere with the transaction, and could lead to
						duplicate charges.</p>
					<div class="loading-spinner"></div>
				</div>
			</div>
		</div>
	</div>

	<form action="/gateway/details.html" method="post" name="pf1" id="pf1" role="form" onsubmit="return false;">
		<input type="hidden" name="pstore" id="pstore" value="15996">
		<input type="hidden" name="p_framed" id="p_framed" value="0">
		<input type="hidden" name="p_fbreak" id="p_fbreak" value="0">
		<input type="hidden" name="session" value="be536e57160c651ea4ebb84417697">
		<input type="hidden" name="jsref" id="jsref" value="">
		<input type="hidden" name="pptoken" id="pptoken" value="">
		<input type="hidden" name="mwidth" id="mwidth" value="">
		<input type="hidden" name="cancel" id="pcancel" value="">
		<input type="hidden" name="p_fb" id="p_fb" value="">
	</form>
	<div class="container">
		<div class="container_overlay"></div>
		<div class="content_header mt-3">
			<div class="jumbotron">
				<h1>
					<span class="tName">T<span class="tInner">elr Secure Payments</span></span>
				</h1>
				<p class="mName3"> TelrDev</p>
				<div class="shield_safe_secure" align="right">
					<img class="shield_1" src="https://uat-secure.telrdev.com/cdn/images/telr/shield_1.png">
					<span class="safe_and_secure">100% Safe and Secure Payments</span>
				</div>
			</div> <!-- jumbotron -->
		</div> <!-- content_header -->

		<div class="content_body">
			<div style="display:none;" id="init_auth_redirection"> some text here</div>

			<div class="row">
				<h3 class="mt-2 mb-3 pl-15">Payment summary</h3>
					<div class="payment-summary-wrapper p-2">
						<div class="payment-summary">
							<div class="summary-item">
								<div class="summary-label">
									<p>
										Description:
									</p>
								</div>
								<div class="summary-value">
									<p>My description</p>
								</div>
							</div>
							<div class="summary-item">
								<div class="summary-label">
									<p id="currency">
										Amount:
									</p>
								</div>
								<div class="summary-value">
									<p>AED <span id="pay_total">1,000.00</span></p>
								</div>
							</div>
							<hr />
							<h5 class="mb-2 summary-subheading">Convenience fees</h5>
							<div class="summary-item">
								<div class="summary-label">
									<p>
										International Convenience fees:
									</p>
								</div>
								<div class="summary-value">
									<p>1.000% + AED 1.00</p>
								</div>
							</div>
							<div class="summary-item">
								<div class="summary-label">
									<p>
										Domestic Convenience fees:
									</p>
								</div>
								<div class="summary-value">
									<p>1.000% + AED 1.00</p>
								</div>
							</div>
							<hr />
							<div class="summary-item">
								<div class="summary-label">
									<p class="summary-subheading">
										Total amount:
									</p>
								</div>
								<div class="summary-value summary-subheading">
									<p>AED <span id="pay_total">1,000.00</span></p>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>

			<div class="row">
				<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
					<h3 class="mt-2 mb-3">Pay with</h3>
				</div>
			</div>

			<form action="/errors/noscript.html" method="post" name="pf2" id="pf2" role="form" onsubmit="return false;">
				<input type="hidden" name="ivp_pc" value="AED" dp="2">
				<input type="hidden" id="sessionID" name="session" value="be536e57160c651ea4ebb84417697">
				<input type="hidden" name="usrinf" value="0">

				<div class="panel-group" id="accordion">
					<div class="panel panel-default">
						<div class="panel-new-header">
							<div class="panel-subheader">
								<h4 class="panel-title mobile-only-panel-title">
									<input type="radio" name="payby" value="card" id="pm_cc" />
									<label for="pm_cc" class="radio-telr">
										Credit/Debit Card
									</label>
								</h4>
								<div class="card-block card-bar">
									<span class="text-right pull-right ">
										<label class="we-accept" style="margin-right: 7px;">WE ACCEPT</label>
										<img src="https://uat.telrcdn.com/images/spacer.gif" class="logo_visa" id="logo_visa">
										<img src="https://uat.telrcdn.com/images/spacer.gif" class="logo_mastercard" id="logo_mastercard">
									</span>
								</div>
							</div> <!-- panel-subheader -->

							<div id="collapse_card" class="panel-collapse collapse in" aria-expanded="true" style="">
								<div class="panel-body">
									<div class="row">
										<div class="col-md-9 col-sm-9 col-xs-12">
											<div class="form-group">
												<div class="row">
													<div class="col-md-10 col-sm-12 col-xs-12 slim-padding-right">
														<label
															for="creditCardNumber"
															style="height: 15px;width: 200px;color: #9B9B9B;font-family: 'Arial';font-size: 12px;letter-spacing: 0;margin-top: 25px;"
														>
															Card Number*
														</label>
														<input
															type="search"
															pattern="[0-9 ]*"
															inputmode="numeric"
															x-inputmode="numeric"
															x-autocompletetype="cc-number"
															class="form-control"
															name="cc-number"
															id="creditCardNumber"
															autocomplete="cc-number"
															maxlength="21"
															style=" border:1px solid #ddd;border-radius:0px;border-top-style: hidden; border-right-style: hidden; border-left-style: hidden;background-color: #ffffff;box-shadow: none; outline:none;"
															placeholder="xxxx xxxx xxxx xxxx"
														>
														<span class="error-block" id="new_error_text_cc-number"></span>
														<p style="display:none">
															<span
																class="error-block"
																style="display:none;"
																id="error_text_cc-number">Some text here</span>
														</p>
													</div>
													<div class="col-md-4 col-sm-5 col-xs-5 slim-padding" id="up-skip1">
														<label
															for="creditCardValidTill"
															style="height: 15px; width: 150px; color: #9B9B9B; font-family: 'Arial';font-size: 12px;letter-spacing: 0;line-height: 15px;margin-top: 25px;">
															Valid Till*
														</label>
														<input
															type="text"
															pattern="[0-9 ]*"
															inputmode="numeric"
															x-inputmode="numeric" class="form-control"
															name="cc-exp-valid" id="creditCardExp"
															autocomplete="cc-exp-year" x-autocompletetype="cc-exp-year"
															onkeydown="return ppValidate.formatDate(this.value,event);"
															onfocus="return ppValidate.formatDate(this.value,event);"
															maxlength="5"
															style="box-shadow: none;border:0;border-bottom:1px solid #ddd;border-radius:0px;"
															placeholder="MM/YY">
														<span class="error-block" id="new_error_text_cc-expiry"></span>
														<p style="display:none">
															<span
																class="error-block"
																style="display:none;"
																id="error_text_cc-expiry">
															</span>
														</p>
													</div>
													<div class="col-md-2 col-sm-4 hidden-xs"></div>
													<div class="col-md-4 col-sm-5 col-xs-5 slim-padding-left" id="up-skip2">
														<label
															for="cardCVV"
															style="height: 15px;width: 150px;color: #9B9B9B;font-family: 'Arial';font-size: 12px; letter-spacing: 0; line-height: 15px;margin-top: 25px;">
															CVV*
														</label>
														<input
															type="password"
															pattern="[0-9 ]*"
															inputmode="numeric"
															x-inputmode="numeric"
															class="form-control"
															name="cc-csc"
															id="cardCVV"
															autocomplete="cc-csc"
															x-autocompletetype="cc-csc"
															onkeydown="return ppValidate.formatCvv(event)"
															onkeyup="ppValidate.validCvv(this.value); return false;"
															maxlength="4"
															style="width: 100%;box-shadow: none;border:0;border-bottom:1px solid #ddd;border-radius:0px;display: inline-block;"
															placeholder="123">
														<img
															id="cvv_info"
															src="https://uat-secure.telrdev.com/cdn/images/info.svg"
														>
														<img
															id="cvv_tooltip"
															src="https://uat-secure.telrdev.com/cdn/images/cvv_tooltip.png">
														<span
															class="error-block"
															style="display:none;"
															id="error_text_cc-csc">
														</span>
													</div>
												</div> <!-- row -->
											</div>
										</div> <!-- col-md-8 col-sm-10 col-xs-12 -->
										<div class="col-md-3 col-sm-1 hidden-xs"></div>
									</div> <!-- row -->

									<div class="row">
										<div class="col-md-8 col-sm-10 col-xs-12 btn-elements">
											<button
												type="submit" id="cardpaybutton" class="btn btn-primary"
												style="font-weight: bold;"
												onclick="ppValidate.PayWith_Card(this); return false;" disabled
											>
												Enter valid card details
											</button>
											<input type="hidden" id="paybutton" value="Enter valid card details">
											<input type="hidden" id="makebutton" value="Pay Now">
											<button
												class="btn btn-secondary"
												style="font-weight: bold;"
												onclick="ppValidate.Cancel(this); return false;">
												Cancel
											</button>
										</div> <!-- col-md-8 col-sm-10 col-xs-12 -->
										<div class="col-md-3 col-sm-1 hidden-xs"></div>
									</div> <!-- row -->
								</div> <!-- panel-body -->
							</div> <!-- collapse_card -->
						</div>

						<script>
							function checkDisplay() {
								var ivp_store = '15996';
								var ivp_test = '0';

								function hideApplePay() {
									// if (document.getElementById("applepaysubheader")) {
									// 	document.getElementById("applepaysubheader").style.display = "none";
									// }
									// if (document.getElementById("collapse_applepay")) {
									// 	document.getElementById("collapse_applepay").style.display = "none";
									// }
									// if (document.getElementById("pm_applepay")) {
									// 	document.getElementById("pm_applepay").style.display = "none";
									// }
								}

								if (window.ApplePaySession) {
									var merchantIdentifier = 'merchant.com.telr.applepay';

									var promise = ApplePaySession.canMakePaymentsWithActiveCard(merchantIdentifier);
									promise.then(function (canMakePayments) {
										if (canMakePayments) {

											document.getElementById("applePay").style.display = "inline-block";
										} else {
											hideApplePay();
										}
									}).catch(function (error) {
										hideApplePay();
									});
								} else {
									hideApplePay();
								}
								if ((ivp_store == '27621' || ivp_store == '27620')) {
									hideApplePay();
								}

							}

							function OnApplePayClick() {

								if (ppValidate.CheckUserInfo() == false) {
									return false;
								}
								var currency_code = 'AED';
								var dec = 100;
								if (currency_code == 'OMR' || currency_code == 'BHD' || currency_code == 'JOD' || currency_code == 'KWD') {
									dec = 1000;
								}
								var ivp_qtyelement = document.getElementById('qtysel');
								var ivp_qty = 1;
								if (ivp_qtyelement !== null) {
									ivp_qty = ivp_qtyelement.value;
								}
								var runningAmount = (100000 * parseInt(ivp_qty)) / dec;
								var runningPP = 0;
								getShippingCosts('domestic_std', true);
								var runningTotal = function () {
									return runningAmount + runningPP;
								}
								var shippingOption = "";

								var subTotalDescr = "Test Goodies";
								var storename = 'TelrDev';

								var store_country = 'AE';

								if (store_country == 'SA') {
									var paymentRequest = {
										currencyCode: 'AED',
										countryCode: store_country,
										total: {
											label: '',
											amount: runningAmount
										},
										supportedNetworks: ['amex', 'masterCard', 'visa', 'mada'],
										merchantCapabilities: ['supports3DS', 'supportsCredit', 'supportsDebit']
									};
								} else {
									var paymentRequest = {
										currencyCode: 'AED',
										countryCode: store_country,
										total: {
											label: '',
											amount: runningAmount
										},
										supportedNetworks: ['amex', 'masterCard', 'visa'],
										merchantCapabilities: ['supports3DS', 'supportsCredit', 'supportsDebit']
									};
								}


								function getShippingOptions(shippingCountry) {
									if (shippingCountry.toUpperCase() == "AED") {
										shippingOption = [{
											label: 'Standard Shipping',
											amount: getShippingCosts('domestic_std', true),
											detail: '3-5 days',
											identifier: 'domestic_std'
										}, {
											label: 'Expedited Shipping',
											amount: getShippingCosts('domestic_exp', false),
											detail: '1-3 days',
											identifier: 'domestic_exp'
										}];
									} else {
										shippingOption = [{
											label: 'International Shipping',
											amount: getShippingCosts('international', true),
											detail: '5-10 days',
											identifier: 'international'
										}];
									}

								}

								function getShippingCosts(shippingIdentifier, updateRunningPP) {

									var shippingCost = 0;

									switch (shippingIdentifier) {
										case 'domestic_std':
											shippingCost = 3;
											break;
										case 'domestic_exp':
											shippingCost = 6;
											break;
										case 'international':
											shippingCost = 9;
											break;
										default:
											shippingCost = 11;
									}

									if (updateRunningPP == true) {
										runningPP = shippingCost;
									}

									return shippingCost;
								}

								var session = new ApplePaySession(1, paymentRequest);

								// Merchant Validation
								session.onvalidatemerchant = function (event) {

									var promise = performValidation(event.validationURL);

									promise.then(function (merchantSession) {

										session.completeMerchantValidation(merchantSession);
									}).catch(function (error) {
										alert('Merchant invalid!!' + error);
									});

								}
								session.onshippingcontactselected = function (event) {

									var status = ApplePaySession.STATUS_SUCCESS;
									var newShippingMethods = [];
									var newTotal = {type: 'final', label: '', amount: runningTotal()};
									var newLineItems = [];

									session.completeShippingContactSelection(status, newShippingMethods, newTotal, newLineItems);
								}

								session.onshippingmethodselected = function (event) {
									getShippingCosts(event.shippingMethod.identifier, true);

									var status = ApplePaySession.STATUS_SUCCESS;
									var newTotal = {type: 'final', label: '', amount: runningTotal()};
									var newLineItems = [];

									session.completeShippingMethodSelection(status, newTotal, newLineItems);
								}

								session.onpaymentmethodselected = function (event) {

									var newTotal = {type: 'final', label: 'TelrDev', amount: runningAmount};
									var newLineItems = [];

									session.completePaymentMethodSelection(newTotal, newLineItems);
								}

								var applepay_enc_version = "";
								var applepay_enc_paydata = "";
								var applepay_enc_paysig = "";
								var applepay_enc_pubkey = "";
								var applepay_enc_keyhash = "";
								var applepay_tran_id = "";
								var applepay_card_desc = "";
								var applepay_card_scheme = "";
								var applepay_card_type = "";
								var applepay_tran_id2 = "";

								var tran_status = 0;
								var transactionStatus = "";
								var integ_type = 0;
								var return_auth;
								var return_decl;

								function printValues(obj) {
									for (var key in obj) {
										if (typeof obj[key] === "object") {

											printValues(obj[key]);

										} else {
											if (key == "version") {
												applepay_enc_version = obj[key];
											}
											if (key == "data") {
												applepay_enc_paydata = encodeURIComponent(obj[key]);
											}
											if (key == "signature") {
												applepay_enc_paysig = encodeURIComponent(obj[key]);
											}
											if (key == "ephemeralPublicKey") {
												applepay_enc_pubkey = encodeURIComponent(obj[key]);
											}
											if (key == "publicKeyHash") {
												applepay_enc_keyhash = obj[key];
											}
											if (key == "transactionId") {
												applepay_tran_id = obj[key];
											}
											if (key == "type") {
												applepay_card_type = obj[key];
											}
											if (key == "displayName") {
												applepay_card_desc = obj[key];
											}
											if (key == "network") {
												applepay_card_scheme = obj[key];
											}
											if (key == "transactionIdentifier") {
												applepay_tran_id2 = obj[key];
											}
										}
									}
								}

								function getTransactionStatus(obj) {
									for (var key in obj) {
										if (typeof obj[key] === "object") {

											printValues(obj[key]);

										} else {
											if (key == "status") {
												transactionStatus = obj[key];
											}
										}
									}
								}

								function sendPaymentToken(paymentToken) {

									var currency_code = 'AED';
									var dec = 100;
									if (currency_code == 'OMR' || currency_code == 'BHD' || currency_code == 'JOD' || currency_code == 'KWD') {
										dec = 1000;
									}
									ppValidate.ShowWait();
									return new Promise(function (resolve, reject) {
										var ivp_sess = 'be536e57160c651ea4ebb84417697';
										var ivp_apenctxt = '6a00ad35bd001e609fd34ad24a60692a';
										return_auth = 'None';
										return_decl = 'None';
										integ_type = '9';
										var xhr = new XMLHttpRequest();
										xhr.onload = function () {
											if (xhr.status == 200) {
												var jsonData = this.response;
												getTransactionStatus(jsonData)
												var data = JSON.parse(jsonData);
												var st = data.transaction.status;
												if (st == 'A') {

													tran_status = 1;
													if (integ_type == 20) {
														return_auth = data.zoho.url;
													}
												} else {
													if (integ_type == 20) {
														return_decl = data.zoho.url;
													}
												}

												resolve(true);
											}
										};
										xhr.onerror = reject;
										var ivp_qtyelement = document.getElementById('qtysel');
										var ivp_qty = 1;
										if (ivp_qtyelement !== null) {
											ivp_qty = ivp_qtyelement.value;
										}
										var params = "ivp_sess=" + ivp_sess + "&ivp_apenctxt=" + ivp_apenctxt + "&applepay_enc_version=" + applepay_enc_version + "&applepay_enc_paydata=" + applepay_enc_paydata + "&applepay_enc_paysig=" + applepay_enc_paysig + "&applepay_enc_pubkey=" + applepay_enc_pubkey + "&applepay_enc_keyhash=" + applepay_enc_keyhash + "&applepay_tran_id=" + applepay_tran_id + "&applepay_card_desc=" + applepay_card_desc + "&applepay_card_scheme=" + applepay_card_scheme + "&applepay_card_type=" + applepay_card_type + "&applepay_tran_id2=" + applepay_tran_id2 + "&ivp_qty=" + ivp_qty;
										var URL = "https://uat-secure.telrdev.com/gateway/remote.json";
										xhr.open('POST', URL, true);
										xhr.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
										xhr.send(params);
									});
								}

								session.onpaymentauthorized = function (event) {
									printValues(event.payment.token);
									var promise = sendPaymentToken(event.payment.token);
									promise.then(function (success) {
										var status;
										if (tran_status) {

											status = ApplePaySession.STATUS_SUCCESS;
											document.getElementById("applePay").style.display = "none";

										} else {

											status = ApplePaySession.STATUS_FAILURE;
										}
										session.completePayment(status);
										var form = document.createElement("form");
										var form_sess = document.createElement("input");
										form.method = "POST";
										form.action = "/gateway/details.html";
										form_sess.value = "be536e57160c651ea4ebb84417697";
										form_sess.name = "session";
										form_sess.type = "hidden";
										form.appendChild(form_sess);
										document.body.appendChild(form);
										form.submit();
									}).catch(function () {
										alert('Some error has occured after');
									});
								}
								session.oncancel = function (event) {

								}

								session.begin();
							}

							function performValidation(valURL) {
								return new Promise(function (resolve, reject) {
									var xhr = new XMLHttpRequest();
									xhr.onload = function () {
										if (xhr.status == 200) {
											var jsonData = this.response;

											var data = JSON.parse(jsonData);

											resolve(data);
										}
									};
									xhr.onerror = reject;
									var varURL = "https://uat-secure.telrdev.com/applepay/apple_pay_com.php?u=" + valURL;
									xhr.open('GET', varURL, true);
									xhr.send();
								});
							}
						</script>
						<div class="panel-new-header">
							<div class="panel-subheader" id="applepaysubheader">
								<script type="text/javascript">
									checkDisplay();
								</script>
								<h4 class="panel-title">
									<input type="radio" name="payby" value="applepay" id="pm_applepay">
									<label for="pm_applepay">Apple Pay</label>
								</h4>
								<div
									class="card-block card-bar">
									<span class="text-right pull-right">
										<img
											src="https://uat.telrcdn.com/images/cards/logo_applepay.svg"
											 class="logo_applepay"
											id="logo_applepay">
									</span>
								</div>
							</div>

							<div id="collapse_applepay" class="panel-collapse collapse" aria-expanded="false">
								<div class="panel-body">
									<div class="form-group">
										<div class="row">
											<div class="col-md-10 col-sm-10 col-xs-12">
												To pay using Apple Pay click the button below.
											</div>
										</div>
										<div class="row">
											<div class="col-md-10 col-sm-10 col-xs-12 apple-pay">
												<button
													type="button"
													id="applePay"
													class="apple-pay-button btn btn-secondary mt-2"
													onclick="OnApplePayClick();"
													style="display: inline-block;"
												>
													<img src="assets/apple-pay.png" alt="Pay with Apple Pay">
												</button>
											</div>
											<div class="col-md-1 col-sm-1 hidden-xs"></div>
										</div>
									</div>
								</div>
							</div>
						</div>
						<div class="panel-new-header">
							<div class="panel-subheader">
								<h4 class="panel-title">
									<input
										type="radio"
										name="payby"
										value="paypal"
										id="pm_pp">
									<label for="pm_pp">PayPal</label>
								</h4>
								<div>
									<span class="text-right pull-right">
										<img
											src="https://uat.telrcdn.com/images/spacer.gif" class="logo_paypal"
											id="logo_paypal">
									</span>
								</div>
							</div>
							<div id="collapse_paypal" class="panel-collapse collapse" aria-expanded="false">
								<div class="panel-body">
									<div class="form-group">
										<div class="row">
											<div class="col-md-10 col-sm-10 col-xs-12">
												To pay using PayPal click the button
												below. You will be taken to the PayPal site to complete the transaction.<br>
											</div>
											<div class="col-md-1 col-sm-1 hidden-xs"></div>
										</div>
										<div class="row">
											<div class="col-md-10 col-sm-10 col-xs-12 mt-10">
												<button
													type="submit"
													class="btn btn-paypal mt-2"
													onclick="ppValidate.PayWith_PayPal(this); return false;"
												>
													<img src="assets/paypal-logo.png" alt="Pay with Pay Pal">
												</button>
											</div>
											<div class="col-md-1 col-sm-1 hidden-xs"></div>
										</div>
									</div> <!-- form-group -->
								</div> <!-- panel-body -->
							</div> <!-- collapse_paypal -->
						</div>

						<div class="panel-new-header">
							<div class="panel-subheader">
								<h4 class="panel-title">
									<input type="radio" name="payby" value="tabby" id="pm_tb">
									<label for="pm_tb">Tabby</label>
								</h4>
								<div class="card-block card-bar">
									<span class="text-right pull-right">
										<img src="https://uat.telrcdn.com/images/tabbysmall.png">
									</span>
								</div>
							</div>
							<div id="collapse_tabby" class="panel-collapse collapse" aria-expanded="false">
								<div class="panel-body">
									<div class="form-group">
										<div class="row" id="creditCardButton" hidden="">
											<div class="col-md-10 col-sm-10 col-xs-12">
												<input type="radio" name="tabby" id="cc" value="cc">
												Split it (Credit Card Installments)
											</div>
										</div>
										<div class="row" id="installmentsButton">
											<div class="col-md-10 col-sm-10 col-xs-12">
												<input type="radio" name="tabby" id="ins" value="ins">
												Split in 4 (Installments)
											</div>
										</div>
									</div>
									<div class="row" id="Errortext" hidden="">
										<div class="col-md-10 col-sm-10 col-xs-12">
											Tabby transaction not allowed for the Phone number/ Email ID.<br>&nbsp;
										</div>
									</div>
									<div class="row" id="ErrorAmount" hidden="">
										<div class="col-md-10 col-sm-10 col-xs-12"><br>&nbsp;
										</div>
									</div>
									<div class="row">
										<br>&nbsp;
										<div class="col-md-10 col-sm-10 col-xs-12">
											<button id="paynow" class="btn btn-primary" type="submit">Pay now</button>
										</div>
										<div class="col-md-1 col-sm-1 hidden-xs"></div>
									</div>
								</div>
							</div>
						</div>
						<!-- LINK integration.js ON CHECKOUT/PAYMENT OPTIONS PAGE  -->
						<!-- ALL CALLS ARE ASYNCHRONOUS, WE STRONGLY RECOMMEND TO INITIALIZE SESSION AS SOON AS POSSIBLE  -->
						<!--THIS WAY EVERYTHING WOULD BE READY WHEN CUSTOMER DESIDES TO CHOOSE A PAYMENT METHOD  -->
						<script>

							// THIS IS USED TO CONTROL RECREATION OF TABBY POPUP
							var relaunchTabby = false;
							var paymentID;
							var paymentStatus;
							var available_type = 0;
							var payment_url_en = ('https%3a%2f%2fcheckout.tabby.ai%2f%3fsessionId%3d9a7b1c4c-6e85-4dac-ac33-24a186b127ce%26apiKey%3dpk_9a2734b2-c10b-4041-901e-671011d4b44c%26product%3dinstallments%26merchantCode%3d15996');
							var payment_url_instal = decodeURIComponent(payment_url_en);
							var payment_url_en = ('');
							var payment_url_cc = decodeURIComponent(payment_url_en);
							var payment_rejected = ('');
							// IN THIS DEMO WE HAVE TWO BUTTONS, DEPENDS ON CHECKOUT IMPLEMENTATION
							var creditCardButton = document.querySelector('#creditCardButton');
							var installmentsButton = document.querySelector('#installmentsButton');

							if ('') { // TODO What is this condition ?????
								//console.log("payd_allow_tabby_cc ");
								//  creditCardButton.classList.remove('button__disabled');
								// creditCardButton.removeAttribute('hidden');
								// payLatertext.removeAttribute('hidden');
								// paynow.removeAttribute('hidden');
								//available_type=available_type+1;
							}

							if ('1') { // TODO What is this condition ?????
								//console.log("payd_allow_tabby_in ");
								installmentsButton.classList.remove('button__disabled');
								installmentsButton.removeAttribute('hidden');
								// installmentstext.removeAttribute('hidden');
								paynow.removeAttribute('hidden');
								available_type = available_type + 1;
							}

							if (available_type == 1) {
								if (!(window.getComputedStyle(creditCardButton).display === "none")) {
									document.getElementById('cc').checked = true;
								} else if (!(window.getComputedStyle(installmentsButton).display === "none")) {
									document.getElementById('ins').checked = true;
								}
							}

							// IMPORTANT PIECE, TELLS SDK IF POPUP NEEDS TO BE RENDERED AGAIN
							//console.log("available_type " + available_type);
							if (available_type == 0) {
								ErrorAmount.removeAttribute('hidden');
								//console.log('Payment rejected:',payment_rejected);
							}

							paymentID = '4b731345-1d0a-4be8-9331-96bfcacdb475';
							paymentStatus = 'CREATED';
							// THIS SNIPPET DEMOSTRATES AN ONCLICK EVENT FOR 'PLACE ORDER' BUTTON
							// IN CASE OF A SINGLE BUTTON, YOU CAN SAVE selectedTabbyProduct UPFRONT WHEN USERS CHOOSES ONE OF THE METHODS
							paynow.onclick = () => {
								if (ppValidate.CheckUserInfo() == false) {
									return false;
								}
								if (document.getElementById('ins').checked) {
									//Before Payment process updated Payment ID
									ppValidate.tabby_payment_id = paymentID;
									ppValidate.tabby_payment_status = paymentStatus;
									ppValidate.tabby_payment_type = 'Installments';
									//ppValidate.Initiate_Tabby();
									window.location.replace((payment_url_instal));
								}

								if (document.getElementById('cc').checked) {
									//Before Payment process updated Payment ID
									ppValidate.tabby_payment_id = paymentID;
									ppValidate.tabby_payment_status = paymentStatus;
									ppValidate.tabby_payment_type = 'Installments';
									//ppValidate.Initiate_Tabby();
									window.location.replace((payment_url_cc));
								}
							};
						</script>
					</div> <!-- panel-default -->
				</div> <!-- panel-group -->

				<div class="row mt-2"> <!-- inner row, same level as expiry, cvv etc -->
					<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12" style="margin-bottom: 15px;margin-bottom: 10px;">
						<div class="tc_block">
							<div class="tc_text">
								<label class="checkbox-telr">
									<input id="tc_box" type="checkbox" name="term_agree" value="agree" />
									<div class="checkbox__checkmark"></div>
									<div class="checkbox__body">
										By clicking on this checkbox you agree to the
										<a href="http://www.telr.com/" target="_blank" onclick="display_terms(); return false;"> terms and conditions
										</a> of the website
									</div>
								</label>
							</div>
							<div class="tc_check"></div>
						</div>
						<div class="tc_block">
							<div class="tc_text">
								<label class="checkbox-telr">
									<input id="convfee_box" type="checkbox" name="convfee_agree" value="agree" />
									<div class="checkbox__checkmark"></div>
									<div class="checkbox__body">
										By clicking this checkbox, you agree to bear the convenience fee charged for this transaction.
									</div>
								</label>
							</div>
							<div class="tc_check"></div>
						</div>
					</div>
				</div> <!-- row -->
				<script langauge="javascript">
					function enable_tcbox() {
						document.getElementById("tc_box").disabled = false;
					}

					function display_terms() {
						setTimeout(enable_tcbox, 5000);
						window.open('http://www.telr.com/', 'PaymentTerms', 'height=650,width=850,left=80,top=80,resizable=yes,scrollbars=yes,toolbar=no,menubar=no,location=no,directories=no,status=no,titlebar=yes');
					}
				</script>
			</form>
		</div> <!-- content_body -->

		<div
			class="content_footer"
			style="display: block !important; visibility: visible !important; bottom: 0 !important; left: 0 !important; right: 0 !important; width: 100% !important; min-height: 30px !important;">
				<div class="row" style="display: block !important; visibility: visible !important;">
					<div class="col-xs-12  col-xxs-12">
						<footer>
							<center><p><a href="https://telr.com/english/index.php" target="_blank" class="footer">Powered by
								Telr</a> | <a href="https://telr.com/english/terms.php" target="_blank" class="footer">Website
								Terms &amp; Conditions</a> | <a href="https://telr.com/english/privacy.php" target="_blank"
																								class="footer">Privacy policy</a></p></center>
						</footer>
					</div>
					<div class="hidden">
						<footer>
							<center>
								<p>
									<a href="https://telr.com/english/index.php" target="_blank" class="footer">
										Powered by Telr
									</a>
									<br>
									<a href="https://telr.com/english/terms.php" target="_blank" class="footer">
										Website Terms &amp; Conditions
									</a> |
									<a href="https://telr.com/english/privacy.php" target="_blank" class="footer">
										Privacy policy
									</a>
								</p>
							</center>
						</footer>
					</div>
				</div> <!-- row -->
			</div> <!-- content_footer -->
		</div> <!-- container -->

		<div class="modal fade" id="tcashDialog" data-backdrop="static" data-keyboard="false">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-body">
						<iframe
							width="800" height="695" frameborder="0" scrolling="auto"
							style="width: 800px; height: 695px; border: 0; margin: 0 auto; padding: 0; outline: none; display: block;"
							name="tcash" id="tcash_frame" src="https://uat.telrcdn.com/images/spacer.gif">
						</iframe>
					</div>
				</div>
			</div>
		</div>
		<div class="modal fade" id="mpiDialog" data-backdrop="static" data-keyboard="false">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header"><h4 class="modal-title">Card verification</h4></div>
					<div class="modal-body">
						<iframe
							width="500" height="460" frameborder="0" scrolling="auto"
							style="width: 500px; height: 460px; border: 0; margin: 0 auto; padding: 0; outline: none; display: block;"
							name="acs" id="mpi_frame" src="https://uat.telrcdn.com/images/spacer.gif">
						</iframe>
					</div>
					<div class="modal-footer">
						<p>
							Do not press 'Reload' or 'Back' as that may interfere with the transaction, and
							could lead to duplicate charges.
						</p>
					</div>
				</div>
			</div>
		</div>

		<script>
			var jwt_pay = "eyJqdGkiOiJqdGlfMTFjOTdkMjctYzYyNC00MDhlLWFkNWQtNzU4M2ZlNjQxMjIyIiwiaWF0IjoxNjk2NTA3MTE1LCJpc3MiOiI2NGQ2NTE1NzEwMmNmMTFlMGJiOGQzZTQiLCJPcmdVbml0SWQiOiI2NGQyNGE2NGYyZmI1NTYwZmJhYjJlNjciLCJSZWZlcmVuY2VJZCI6Im1pZF8xMWM5N2QyNy1jNjI0LTQwOGUtYWQ1ZC03NTgzZmU2NDE" + "yMjIiLCJQYXlsb2FkIjp7Ik9yZGVyRGV0YWlscyI6eyJPcmRlck51bWJlciI6Imp3dE9yZGVyXzExYzk3ZDI3LWM2MjQtNDA4ZS1hZDVkLTc1ODNmZTY0MTIyMiIsIkFtb3VudCI6MTAwMC4wMCwiQ3VycmVuY3lDb2RlIjoiQUVEIn0sIk9iamVjdGlmeVBheWxvYWQiOiJ0cnVlIiwiaWF0IjoxNjk2NTA4MDE1fX0" + "";
			ppValidate.StartCardinal("eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9", jwt_pay, "LIzdikzU4af47pbThmiLI8hnAGkVKpFHj-M0J-yDXLE", "mid_11c97d27-c624-408e-ad5d-7583fe641222");
			ppValidate.cybersource_enabled = true;
			ppValidate.framed = 0;
		</script>

		<script>
			ppValidate.WaitForDOM();
			ppValidate.InitDetailsForm();
			ppValidate.SetErr({
				curr_notset: "Currency not set.",
				cvv_notset: "Security code must be set.",
				cvv_inval: "Security code not valid.",
				pwd_notset: "Password not set.",
				pwd_inval: "Passwords must be at least 6 characters. Spaces cannot be used.",
				pwd_differ: "Password and password confirmation do not match.",
				cardnum_notset: "Card number must be set.",
				cardnum_inval: "Card number not valid.",
				exp_notset: "Expiry date must be set.",
				exp_inval: "Expiry date not valid.",
				name_notset: "Full name not set. Please use forename and surname.",
				fname_notset: "Forename name not set.",
				sname_notset: "Surname name not set.",
				email_notset: "Email not set.",
				phone_notset: "Phone number not set.",
				phone1_notset: "Phone number not set.",
				phone2_notset: "Phone number not set.",
				phone_inval: "Please Enter a Valid Phone Number.",
				phone1_inval: "Please Enter a Valid Phone Number.",
				phone2_inval: "Phone number is not valid.",
				addr1_notset: "Address line 1 not set.",
				city_notset: "City not set.",
				rcode_notset: "Region not set.",
				ccode_notset: "Country not set.",
				terms_notset: "Terms and conditions not checked.",
				convfee_terms_notset: "Convenience Fees terms and conditions not checked.",
				esis_terms_notset: "ESIS Number checkbox not checked.",
				pcode_notset: "Post/Area code not set.",
				sadad_olp_notset: "Please enter your SADAD Account ID",
				sadad_olp_notvalid: "Account ID format is incorrect. Please enter a valid account ID.",
				billdesk_bank_notset: "Please select your bank",
				billdesk_bank_inval: "Invalid bank selection",
				netbank_bank_notset: "Please select your bank",
				netbank_bank_inval: "Invalid bank selection",
				finnet_channel_notset: "Please select the payment channel",
				finnet_channel_inval: "Invalid payment channel",
				finnet_method_notset: "Please select the payment method",
				finnet_method_inval: "Invalid payment method",
				cust_id_inval: "Customer ID is not valid.",
				amount_inval: "Amount not valid.",
				qpay_delete: "Are you sure you want to delete this card?",
				autofx_notset: "To complete this transaction you must agree to the currency conversion."
			});
		</script>

		<iframe
			id="Cardinal-collector"
			height="0"
			width="0"
			frameborder="0"
			style="display: none; position: absolute; top: -1000px; left: -1000px;">
		</iframe>
	</body>
</html>
